<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-3.6.0.js"></script>
</head>
<body>
<div align="center">
    <div id="userid" hidden="hidden"></div>
    用户名<span id="username"></span>
    <img id="headimg" src="" width="100px" height="100px" style="vertical-align: middle">
    <br><br>
    昵称<span id="nickname"></span>
    <br><br>
    获赞<span id="likenum"> </span>
    <span id="blog">文章</span>
    <span id="comment">评论</span>
    <table id="show"></table>
</div>
</body>
<script>
    var userId = location.href.substring(location.href.lastIndexOf("=") + 1);
    //用户空间的内容
    $.ajax({
        url: "user/getOthersMessage",
        type: "POST",
        data: {userId: userId},
        success: function (res) {
            $("#userid").html(res.user.userId)
            $("#username").html(res.user.userName)
            $("#nickname").html(res.user.nickName)
            $("#headimg").attr("src", res.user.headImg)
            $("#likenum").html(res.likeNum)
        },
        dataType: "json"
    })


    //查看别人发布的文章
    $("#blog").click(function blog() {
        $.ajax({
            url: "user/getOthersBlogs",
            type: "POST",
            data: {userId: userId},
            success: function (res) {
                $("#show").html("")
                $("#show").append('<br>')
                for (var i = 0; i < res.length; i++) {
                    $("#show").append('<a style="display: inline-block; width: 300px" target=_blank href=blog.html?blogId=' + res[i].blogId + '>' + res[i].title + '</a>'+'&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp');
                    $("#show").append('<span class="deleteblog" id=' + res[i].blogId + '>' + '删除' + '</span>' + "<br><br>");
                }
                //删除文章
                $(".deleteblog").click(function () {
                    $.ajax({
                        url: "admin/adminDeleteBlog",
                        type: "POST",
                        data: {blogId: $(this).attr("id")},
                        success: function (res) {
                            alert("删除成功")
                            blog()
                        }
                    })
                })
            },
            dataType: "json"
        })
    })

    //看用户的评论
    $("#comment").click(function comment(){
        $.ajax({
            url: "comment/getOthersComments",
            type: "POST",
            data: {userId: userId},
            success: function (res) {
                $("#show").html("")
                $("#show").append('<br>')
                for (var i = 0; i < res.length; i++) {
                    $("#show").append('<span style="width: 300px;display: inline-block">'+res[i].content+'</span>');
                    $("#show").append('<span  class="deletecomment" id=' + res[i].commentId + '>' + '删除' + '</span>' + "<br>");
                }
                //删除用户的评论
                $(".deletecomment").click(function () {
                    $.ajax({
                        url: "admin/adminDeleteComment",
                        type: "POST",
                        data: {commentId: $(this).attr("id")},
                        success: function (res) {
                            alert("删除成功")
                            comment()
                        }
                    })
                })
            },
            dataType: "json"
        })
    })
</script>
</html>